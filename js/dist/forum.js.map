{"version":3,"sources":["webpack://@fof/byobu/webpack/bootstrap","webpack://@fof/byobu/external \"flarum.core.compat['extend']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Button']\"","webpack://@fof/byobu/external \"flarum.core.compat['models/User']\"","webpack://@fof/byobu/external \"flarum.core.compat['models/Discussion']\"","webpack://@fof/byobu/external \"flarum.core.compat['Model']\"","webpack://@fof/byobu/external \"flarum.core.compat['models/Group']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Notification']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/LinkButton']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/listItems']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Badge']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/highlight']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/username']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/extract']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionList']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/UserPage']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/LogInModal']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/EventPost']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/classList']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionListItem']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionHero']\"","webpack://@fof/byobu/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/byobu/./src/forum/components/sources/UserSearchSource.js","webpack://@fof/byobu/./src/forum/components/sources/GroupSearchSource.js","webpack://@fof/byobu/./src/common/helpers/recipientLabel.js","webpack://@fof/byobu/./src/forum/components/RecipientSearch.js","webpack://@fof/byobu/./src/forum/components/AddRecipientModal.js","webpack://@fof/byobu/./src/forum/components/PrivateDiscussionComposer.js","webpack://@fof/byobu/./src/common/helpers/recipientCountLabel.js","webpack://@fof/byobu/./src/forum/addRecipientComposer.js","webpack://@fof/byobu/./src/common/helpers/recipientsLabel.js","webpack://@fof/byobu/./src/forum/addRecipientLabels.js","webpack://@fof/byobu/./src/forum/addRecipientsControl.js","webpack://@fof/byobu/./src/forum/addHasRecipientsBadge.js","webpack://@fof/byobu/./src/forum/addDiscussPrivatelyControl.js","webpack://@fof/byobu/./src/forum/addPrivacySetting.js","webpack://@fof/byobu/./src/forum/components/PrivateDiscussionList.js","webpack://@fof/byobu/./src/forum/components/PrivateDiscussionsUserPage.js","webpack://@fof/byobu/./src/forum/addPrivateDiscussionsPage.js","webpack://@fof/byobu/./src/forum/components/notifications/PrivateDiscussionNotification.js","webpack://@fof/byobu/./src/forum/components/notifications/PrivateDiscussionReplyNotification.js","webpack://@fof/byobu/./src/forum/components/notifications/PrivateDiscussionUserLeftNotification.js","webpack://@fof/byobu/./src/forum/components/notifications/PrivateDiscussionAddedNotification.js","webpack://@fof/byobu/./src/forum/components/notifications/PrivateDiscussionMadePublicNotification.js","webpack://@fof/byobu/./src/forum/components/PrivateDiscussionIndex.js","webpack://@fof/byobu/./src/forum/components/RecipientsModified.js","webpack://@fof/byobu/./src/forum/components/RecipientLeft.js","webpack://@fof/byobu/./src/forum/addPrivateDiscussionsToSessionDropdown.js","webpack://@fof/byobu/./src/common/helpers/index.js","webpack://@fof/byobu/./src/forum/components/index.js","webpack://@fof/byobu/./src/forum/index.js","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionComposer']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Modal']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Search']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/avatar']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/extractText']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/UserControls']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/SettingsPage']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Switch']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Dropdown']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/NotificationGrid']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Page']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/icon']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/WelcomeHero']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Select']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/SelectDropdown']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/SessionDropdown']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/IndexPage']\"","webpack://@fof/byobu/./forum.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_inheritsLoose","subClass","superClass","constructor","__proto__","UserSearchSource","view","query","length","this","loading","app","cache","byobuResults","className","translator","trans","map","user","username","children","highlight","data-index","id","avatar","store","find","filter","q","page","limit","then","pushResults","results","payload","data","result","getById","push","redraw","GroupSearchSource","search","toLowerCase","all","group","namePlural","substr","groupName","class","recipientLabel","recipient","attrs","style","label","link","extract","User","title","href","route","config","Group","RecipientSearch","isInitialized","$search","$","on","e","target","addRecipient","focus","parentNode","clearTimeout","typingTimer","doSearch","setTimeout","sources","sourceItems","toArray","props","selected","onclick","removeRecipient","classList","open","focused","active","loadingSources","element","type","placeholder","extractText","oninput","withAttr","onfocus","hasFocus","onblur","in","source","LoadingIndicator","component","size","items","ItemList","discussion","forum","attribute","canEditUserRecipients","add","canEditGroupRecipients","clear","values","split","findRecipient","remove","Search","AddRecipientModal","init","prop","assignInitialRecipients","selectedRecipients","merge","session","recipientSearch","isDismissible","recipientUsers","recipientGroups","helpText","content","isDisabled","Button","disabled","icon","hide","select","metaKey","ctrlKey","indexOf","index","submit","onsubmit","preventDefault","recipients","forEach","save","relationships","current","DiscussionPage","stream","update","modal","close","composer","show","strategy","Modal","PrivateDiscussionComposer","chooseRecipients","param","addDefaultRecipients","extend","tag","getBy","tags","console","error","createRecord","discussionList","refresh","loaded","DiscussionComposer","recipientCountLabel","count","transChoice","recipientsLabel","addToDiscussion","long","concat","DiscussionListItem","params","include","DiscussionList","DiscussionHero","context","document","getElementsByClassName","classes","keys","item","prev","css","DiscussionControls","canEditRecipients","canMakePublic","confirm","history","back","addHasRecipientsBadge","Discussion","badges","Badge","UserControls","blocksPd","cannotBeDirectMessaged","deferred","titlePlaceholder","submitLabel","load","resolve","promise","SettingsPage","Switch","state","preferences","onchange","preferenceSaver","PrivateDiscussionList","PrivateDiscussionsUserPage","changeSort","list","sort","handleChangeSort","loadUser","newDiscussionAction","reject","LogInModal","listItems","actionItems","viewItems","render","canStartDiscussion","itemClassName","sortMap","sortOptions","Dropdown","buttonClassName","UserPage","routes","path","LinkButton","PrivateDiscussionNotification","notification","subject","fromUser","Notification","PrivateDiscussionReplyNotification","postNumber","PrivateDiscussionUserLeftNotification","PrivateDiscussionAddedNotification","PrivateDiscussionMadePublicNotification","PrivateDiscussionIndex","previous","lastDiscussion","privateDiscussionList","some","bodyClass","onunload","scrollTop","window","hero","sidebarItems","arguments","setTitle","setTitleCount","oldHeroHeight","heroHeight","outerHeight","height","scroll","$discussion","indexTop","indexBottom","discussionTop","offset","top","discussionBottom","WelcomeHero","newDiscussion","SelectDropdown","navItems","stickyParams","Select","options","markAllAsRead","searching","clearSearch","routeName","composeNewDiscussion","onlogin","readTime","Date","Page","RecipientsModified","initProps","diff","diff1","diff2","post","usersAdded","usersRemoved","groupsAdded","groupsRemoved","added","removed","oldRecipients","newRecipients","descriptionKey","localeBase","descriptionData","EventPost","RecipientLeft","SessionDropdown","IndexPage","helpers","components","PrivateDiscussionUserPage","initializers","private_discussions","Model","hasMany","oldRecipientUsers","oldRecipientGroups","postComponents","recipientsModified","recipientLeft","users","groups","addRecipientComposer","addRecipientLabels","addRecipientsControl","addPrivacySetting","addDiscussPrivatelyControl","addPrivateDiscussionsPage","addPrivateDiscussionSessionDropdown","notificationComponents","byobuPrivateDiscussionCreated","byobuPrivateDiscussionReplied","PrivateDiscussionRepliedNotification","byobuRecipientRemoved","byobuPrivateDiscussionAdded","byobuMadePublic","NotificationGrid"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 47);\n","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['models/Group'];","module.exports = flarum.core.compat['components/Notification'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/Badge'];","module.exports = flarum.core.compat['helpers/highlight'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['components/DiscussionList'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['components/EventPost'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['components/DiscussionListItem'];","module.exports = flarum.core.compat['components/DiscussionHero'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import highlight from 'flarum/helpers/highlight';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\n\nexport default class UserSearchSource {\n    view(query) {\n        if (query.length < 3 || this.loading) return;\n\n        if (!app.cache.byobuResults) {\n            app.cache.byobuResults = [];\n        }\n\n        this.query = query;\n\n        if (!app.cache.byobuResults[this.query]) {\n            this.loading = true;\n\n            app.cache.byobuResults[this.query] = [];\n            app.store\n                .find('users', {\n                    filter: { q: this.query + ' allows-pd' },\n                    page: { limit: 5 },\n                })\n                .then(this.pushResults.bind(this));\n        } else\n            return [\n                <li className=\"Dropdown-header\">{app.translator.trans('core.forum.search.users_heading')}</li>,\n                app.cache.byobuResults[this.query].map(user => {\n                    const name = username(user);\n                    name.children[0] = highlight(name.children[0], this.query);\n\n                    return (\n                        <li className=\"SearchResult\" data-index={'users:' + user.id()}>\n                            <a data-index={'users:' + user.id()}>\n                                {avatar(user)}\n                                {name}\n                            </a>\n                        </li>\n                    );\n                }),\n            ];\n    }\n\n    pushResults(results) {\n        results.payload.data.map(result => {\n            var user = app.store.getById('users', result.id);\n            app.cache.byobuResults[this.query].push(user);\n        });\n        this.loading = false;\n        m.redraw();\n    }\n}\n","import highlight from 'flarum/helpers/highlight';\n\nexport default class GroupSearchSource {\n    search(query) {\n        return app.store.find('groups', {\n            filter: { q: query },\n            page: { limit: 5 },\n        });\n    }\n\n    view(query) {\n        query = query.toLowerCase();\n\n        const results = app.store.all('groups').filter(\n            group =>\n                group\n                    .namePlural()\n                    .toLowerCase()\n                    .substr(0, query.length) === query\n        );\n\n        if (!results.length) return '';\n\n        return [\n            <li className=\"Dropdown-header\">{app.translator.trans('fof-byobu.forum.search.headings.groups')}</li>,\n            results.map(group => {\n                const groupName = group.namePlural();\n                var name = highlight(groupName, query);\n\n                return (\n                    <li className=\"SearchResult\" data-index={'groups:' + group.id()}>\n                        <a data-index={'groups:' + group.id()}>\n                            <span class=\"groupName\">{name}</span>\n                        </a>\n                    </li>\n                );\n            }),\n        ];\n    }\n}\n","import extract from 'flarum/utils/extract';\nimport username from 'flarum/helpers/username';\nimport User from 'flarum/models/User';\nimport Group from 'flarum/models/Group';\n\nexport default function recipientLabel(recipient, attrs = {}) {\n    attrs.style = attrs.style || {};\n    attrs.className = 'RecipientLabel ' + (attrs.className || '');\n\n    const link = extract(attrs, 'link');\n\n    var label;\n\n    if (recipient instanceof User) {\n        label = username(recipient);\n\n        if (link) {\n            attrs.title = recipient.username() || '';\n            attrs.href = app.route.user(recipient);\n            attrs.config = m.route;\n        }\n    } else if (recipient instanceof Group) {\n        label = recipient.namePlural();\n    } else {\n        attrs.className += ' none';\n        label = app.translator.trans('fof-byobu.forum.labels.user_deleted');\n    }\n\n    return m(link ? 'a' : 'span', attrs, <span className=\"RecipientLabel-text\">{label}</span>);\n}\n","import Search from 'flarum/components/Search';\nimport UserSearchSource from './sources/UserSearchSource';\nimport GroupSearchSource from './sources/GroupSearchSource';\nimport ItemList from 'flarum/utils/ItemList';\nimport classList from 'flarum/utils/classList';\nimport extractText from 'flarum/utils/extractText';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport recipientLabel from '../../common/helpers/recipientLabel';\nimport User from 'flarum/models/User';\nimport Group from 'flarum/models/Group';\n\nexport default class RecipientSearch extends Search {\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        const $search = this;\n\n        this.$('.Search-results').on('click', e => {\n            const target = this.$('.SearchResult.active');\n\n            $search.addRecipient(target.data('index'));\n            $search.$('.RecipientsInput').focus();\n        });\n\n        this.$('.Search-results').on('touchstart', e => {\n            const target = this.$(e.target.parentNode);\n\n            $search.addRecipient(target.data('index'));\n            $search.$('.RecipientsInput').focus();\n        });\n\n        $('.RecipientsInput')\n            .on('keyup', () => {\n                clearTimeout(this.typingTimer);\n                this.doSearch = false;\n                this.typingTimer = setTimeout(() => {\n                    this.doSearch = true;\n                    m.redraw();\n                }, 900);\n            })\n            .on('keydown', () => {\n                clearTimeout(this.typingTimer);\n            });\n\n        super.config(isInitialized);\n    }\n\n    view() {\n        if (typeof this.value() === 'undefined') {\n            this.value('');\n        }\n\n        const loading = this.value() && this.value().length >= 3;\n\n        if (!this.sources) {\n            this.sources = this.sourceItems().toArray();\n        }\n\n        return m(\n            'div',\n            {\n                className: 'AddRecipientModal-form-input',\n            },\n            [\n                m(\n                    'div',\n                    {\n                        className: 'RecipientsInput-selected RecipientsLabel',\n                    },\n                    this.props\n                        .selected()\n                        .toArray()\n                        .map(recipient =>\n                            recipientLabel(recipient, {\n                                onclick: () => {\n                                    this.removeRecipient(recipient);\n                                },\n                            })\n                        )\n                ),\n                m('input', {\n                    className:\n                        'RecipientsInput FormControl ' +\n                        classList({\n                            open: !!this.value(),\n                            focused: !!this.value(),\n                            active: !!this.value(),\n                            loading: !!this.loadingSources,\n                        }),\n                    config: function(element) {\n                        element.focus();\n                    },\n                    type: 'search',\n                    placeholder: extractText(app.translator.trans('fof-byobu.forum.input.search_recipients')),\n                    value: this.value(),\n                    oninput: m.withAttr('value', this.value),\n                    onfocus: () => (this.hasFocus = true),\n                    onblur: () => (this.hasFocus = false),\n                }),\n                m(\n                    'ul',\n                    {\n                        className:\n                            'Dropdown-menu Search-results fade ' +\n                            classList({\n                                in: !!loading,\n                            }),\n                    },\n                    !this.doSearch\n                        ? LoadingIndicator.component({ size: 'tiny', className: 'Button Button--icon Button--link' })\n                        : this.sources.map(source => source.view(this.value()))\n                ),\n            ]\n        );\n    }\n\n    /**\n     * Build an item list of SearchSources.\n     *\n     * @return {ItemList}\n     */\n    sourceItems() {\n        const items = new ItemList();\n\n        // Add user source based on permissions.\n        if (\n            (!this.props.discussion && app.forum.attribute('canStartPrivateDiscussionWithUsers')) ||\n            (this.props.discussion && this.props.discussion.canEditUserRecipients())\n        ) {\n            items.add('users', new UserSearchSource());\n        }\n\n        // Add group source based on permissions.\n        if (\n            (!this.props.discussion && app.forum.attribute('canStartPrivateDiscussionWithGroups')) ||\n            (this.props.discussion && this.props.discussion.canEditGroupRecipients())\n        ) {\n            items.add('groups', new GroupSearchSource());\n        }\n\n        return items;\n    }\n\n    /**\n     * Clear the search input and the current controller's active search.\n     */\n    clear() {\n        this.value('');\n\n        m.redraw();\n    }\n\n    /**\n     * Adds a recipient.\n     *\n     * @param value\n     */\n    addRecipient(value) {\n        let values = value.split(':'),\n            type = values[0],\n            id = values[1];\n\n        let recipient = this.findRecipient(type, id);\n\n        this.props.selected().add(value, recipient);\n\n        this.clear();\n    }\n\n    /**\n     * Removes a recipient.\n     *\n     * @param recipient\n     */\n    removeRecipient(recipient) {\n        let type;\n\n        if (recipient instanceof User) {\n            type = 'users';\n        }\n        if (recipient instanceof Group) {\n            type = 'groups';\n        }\n\n        this.props.selected().remove(type + ':' + recipient.id());\n\n        m.redraw();\n    }\n\n    /**\n     * Loads a recipient from the global store.\n     *\n     * @param store\n     * @param id\n     * @returns {Model}\n     */\n    findRecipient(store, id) {\n        return app.store.getById(store, id);\n    }\n}\n","import Modal from 'flarum/components/Modal';\nimport DiscussionPage from 'flarum/components/DiscussionPage';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport RecipientSearch from './RecipientSearch';\nimport User from 'flarum/models/User';\nimport Group from 'flarum/models/Group';\n\nexport default class AddRecipientModal extends Modal {\n    init() {\n        super.init();\n\n        this.selected = m.prop(new ItemList());\n\n        if (this.props.discussion) {\n            // Adds recipients of the currently viewed discussion.\n            this.assignInitialRecipients(this.props.discussion);\n        } else if (this.props.selectedRecipients.toArray().length > 0) {\n            // Adds previously selected recipients.\n            this.selected().merge(this.props.selectedRecipients);\n        } else {\n            // Adds the current user in case there are no selected recipients yet and this is a new discussion.\n            this.selected().add('users:' + app.session.user.id(), app.session.user);\n        }\n\n        this.recipientSearch = RecipientSearch.component({\n            selected: this.selected,\n            discussion: this.props.discussion,\n        });\n    }\n\n    isDismissible() {\n        return false;\n    }\n\n    assignInitialRecipients(discussion) {\n        discussion.recipientUsers().map(user => {\n            this.selected().add('users:' + user.id(), user);\n        });\n        discussion.recipientGroups().map(group => {\n            this.selected().add('groups:' + group.id(), group);\n        });\n    }\n\n    className() {\n        return 'AddRecipientModal';\n    }\n\n    title() {\n        return this.props.discussion\n            ? app.translator.trans('fof-byobu.forum.modal.titles.update_recipients', { title: <em>{this.props.discussion.title()}</em> })\n            : app.translator.trans('fof-byobu.forum.modal.titles.add_recipients');\n    }\n\n    helpText() {\n        return this.props.discussion\n            ? app.translator.trans('fof-byobu.forum.modal.help.update_recipients')\n            : app.translator.trans('fof-byobu.forum.modal.help.add_recipients');\n    }\n\n    content() {\n        const isDisabled = this.selected().toArray().length < 2;\n\n        return [\n            <div className=\"Modal-body\">\n                <div class=\"AddRecipientModal-help\">{this.helpText()}</div>\n                <div className=\"AddRecipientModal-form\">\n                    {this.recipientSearch}\n                    <div className=\"AddRecipientModal-form-submit App-primaryControl\">\n                        {Button.component({\n                            type: 'submit',\n                            className: 'Button Button--primary',\n                            disabled: isDisabled,\n                            icon: 'fas fa-check',\n                            children: app.translator.trans('fof-byobu.forum.buttons.submit'),\n                        })}\n                        {Button.component({\n                            onclick: this.hide.bind(this),\n                            className: 'Button Button--cancel',\n                            icon: 'fas fa-times',\n                            children: app.translator.trans('fof-byobu.forum.buttons.cancel'),\n                        })}\n                    </div>\n                </div>\n            </div>,\n        ];\n    }\n\n    select(e) {\n        // Ctrl + Enter submits the selection, just Enter completes the current entry\n        if (e.metaKey || e.ctrlKey || this.selected.indexOf(this.index) !== -1) {\n            if (this.selected().length) {\n                this.$('form').submit();\n            }\n        }\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        const discussion = this.props.discussion;\n        const recipients = this.selected();\n\n        let recipientGroups = [];\n        let recipientUsers = [];\n\n        recipients.toArray().forEach(recipient => {\n            if (recipient instanceof User) {\n                recipientUsers.push(recipient);\n            }\n            if (recipient instanceof Group) {\n                recipientGroups.push(recipient);\n            }\n        });\n\n        // Recipients are updated here for existing discussions here.\n        if (discussion) {\n            discussion.save({ relationships: { recipientUsers, recipientGroups } }).then(() => {\n                if (app.current instanceof DiscussionPage) {\n                    app.current.stream.update();\n                }\n                m.redraw();\n            });\n        }\n\n        // Use the onsubmit callback to trigger an update in the DiscussionComposer\n        if (this.props.onsubmit) this.props.onsubmit(recipients);\n\n        app.modal.close();\n\n        app.composer.show();\n        m.redraw.strategy('none');\n    }\n}\n","import { extend } from 'flarum/extend';\nimport DiscussionComposer from 'flarum/components/DiscussionComposer';\nimport AddRecipientModal from './AddRecipientModal';\n\nexport default class PrivateDiscussionComposer extends DiscussionComposer {\n    init() {\n        super.init();\n        this.chooseRecipients();\n\n        const username = m.route.param('username');\n\n        if (typeof username !== 'undefined') {\n            this.addDefaultRecipients(username);\n        }\n\n        if (app.forum.attribute('byobuTag') && app.forum.attribute('byobuTag').length > 0) {\n            extend(PrivateDiscussionComposer.prototype, 'headerItems', function(items) {\n                items.remove('tags');\n            });\n        }\n    }\n\n    onsubmit() {\n        this.loading = true;\n\n        const recipients = this.recipients.toArray();\n\n        if (recipients.length < 2) {\n            app.modal.show(\n                new AddRecipientModal({\n                    selectedRecipients: this.recipients,\n                })\n            );\n\n            this.loading = false;\n        } else {\n            const tag = app.store.getBy('tags', 'slug', app.forum.attribute('byobuTag'));\n\n            if (tag) {\n                this.tags = [tag];\n            } else {\n                console.error('fof/byobu: Could not find tag with slug ' + app.forum.attribute('byobuTag'));\n            }\n\n            const data = this.data();\n\n            app.store\n                .createRecord('discussions')\n                .save(data)\n                .then(discussion => {\n                    app.composer.hide();\n                    if (app.cache.discussionList) {\n                        //app.cache.discussionList.addDiscussion(discussion);\n                        app.cache.discussionList.refresh();\n                    }\n                    //this.loading = false;\n                    m.route(app.route.discussion(discussion));\n                }, this.loaded.bind(this));\n        }\n    }\n}\n","export default function recipientCountLabel(count, attrs = {}) {\n    attrs.style = attrs.style || {};\n    attrs.className = 'RecipientLabel ' + (attrs.className || '');\n\n    var label = app.translator.transChoice('fof-byobu.forum.labels.recipients', count, { count });\n\n    return m('span', attrs, <span className=\"RecipientLabel-text\">{label}</span>);\n}\n","import { extend, override } from 'flarum/extend';\nimport PrivateDiscussionComposer from './components/PrivateDiscussionComposer';\nimport AddRecipientModal from './components/AddRecipientModal';\nimport recipientCountLabel from '../common/helpers/recipientCountLabel';\nimport User from 'flarum/models/User';\nimport Group from 'flarum/models/Group';\nimport ItemList from 'flarum/utils/ItemList';\n\nexport default function(app) {\n    // Add recipient-selection abilities to the discussion composer.\n    PrivateDiscussionComposer.prototype.recipients = new ItemList();\n    PrivateDiscussionComposer.prototype.recipientUsers = [];\n    PrivateDiscussionComposer.prototype.recipientGroups = [];\n\n    // Add the session user as a recipient\n    // If the composer is triggered from a different user page, add them as a recipient\n    PrivateDiscussionComposer.prototype.addDefaultRecipients = function(username) {\n        const user = app.store.getBy('users', 'username', username);\n\n        this.recipients.add('users:' + app.session.user.id(), app.session.user);\n        if (user.id() !== app.session.user.id()) {\n            this.recipients.add('users:' + user.id(), user);\n        }\n    };\n\n    // Add a recipient selection modal when clicking the recipient tag label.\n    PrivateDiscussionComposer.prototype.chooseRecipients = function() {\n        //const actorRecipientClassName = '.RecipientsInput-selected > .RecipientLabel:first-child';\n        app.modal.show(\n            new AddRecipientModal({\n                selectedRecipients: this.recipients,\n                onsubmit: recipients => {\n                    this.recipients = recipients;\n\n                    // Focus on recipient autocomplete field.\n                    this.$('.RecipientsInput').focus();\n                },\n            })\n        );\n        //$(actorRecipientClassName).css('display', 'none');\n    };\n\n    // Add a tag-selection menu to the discussion composer's header, after the\n    // title.\n    extend(PrivateDiscussionComposer.prototype, 'headerItems', function(items) {\n        if (app.session.user && app.forum.attribute('canStartPrivateDiscussion')) {\n            const recipients = this.recipients.toArray();\n\n            items.add(\n                'recipients',\n                <a className=\"PrivateDiscussionComposer-changeRecipients\" onclick={this.chooseRecipients.bind(this)}>\n                    {recipients.length ? (\n                        recipientCountLabel(recipients.length)\n                    ) : (\n                        <span className=\"RecipientLabel none\">{app.translator.trans('fof-byobu.forum.buttons.add_recipients')}</span>\n                    )}\n                </a>,\n                5\n            );\n        }\n    });\n\n    // Add the selected tags as data to submit to the server.\n    extend(PrivateDiscussionComposer.prototype, 'data', function(data) {\n        const users = [];\n        const groups = [];\n        this.recipients.toArray().forEach(recipient => {\n            if (recipient instanceof User) {\n                users.push(recipient);\n            }\n\n            if (recipient instanceof Group) {\n                groups.push(recipient);\n            }\n        });\n\n        data.relationships = data.relationships || {};\n\n        if (users.length) {\n            data.relationships.recipientUsers = users;\n        }\n\n        if (groups.length) {\n            data.relationships.recipientGroups = groups;\n        }\n    });\n}\n","import extract from 'flarum/utils/extract';\nimport recipientLabel from './recipientLabel';\n\nexport default function recipientsLabel(recipients, attrs = {}) {\n    const children = [];\n    const link = extract(attrs, 'link');\n\n    attrs.className = 'RecipientsLabel ' + (attrs.className || '');\n\n    if (recipients) {\n        recipients.forEach(recipient => {\n            children.push(recipientLabel(recipient, { link }));\n        });\n    } else {\n        children.push(recipientLabel());\n    }\n\n    return <span {...attrs}>{children}</span>;\n}\n","import { extend } from 'flarum/extend';\nimport DiscussionListItem from 'flarum/components/DiscussionListItem';\nimport DiscussionPage from 'flarum/components/DiscussionPage';\nimport DiscussionHero from 'flarum/components/DiscussionHero';\nimport DiscussionList from 'flarum/components/DiscussionList';\nimport recipientsLabel from '../common/helpers/recipientsLabel';\n\nexport default function() {\n    const addToDiscussion = function(discussion, items, long) {\n        let recipients = [];\n\n        if (discussion.recipientUsers().length) {\n            recipients = recipients.concat(discussion.recipientUsers());\n        }\n\n        if (discussion.recipientGroups().length) {\n            recipients = recipients.concat(discussion.recipientGroups());\n        }\n\n        if (recipients && recipients.length) {\n            if (long) {\n                items.add('recipients', recipientsLabel(recipients), 10);\n            } else {\n                items.add('recipients', recipientsLabel(recipients, { link: true }), 4);\n            }\n        }\n    };\n\n    /**\n     * Adds User labels on the discussion index page.\n     */\n    extend(DiscussionListItem.prototype, 'infoItems', function(items) {\n        const discussion = this.props.discussion;\n\n        addToDiscussion(discussion, items, true);\n    });\n\n    /**\n     * Require recipients from the API whenever we're loading a Discussion page.\n     */\n    extend(DiscussionPage.prototype, 'params', function(params) {\n        params.include.push('recipientUsers');\n        params.include.push('recipientGroups');\n    });\n    extend(DiscussionList.prototype, 'requestParams', function(params) {\n        params.include.push('recipientUsers');\n        params.include.push('recipientGroups');\n    });\n\n    /**\n     * Adds User labels on the discussion Hero.\n     */\n    extend(DiscussionHero.prototype, 'items', function(items) {\n        const discussion = this.props.discussion;\n\n        addToDiscussion(discussion, items, false);\n    });\n\n    /**\n     * Adds 'hasPrivateMessages' to the class, if we're looking at a private discussion.\n     */\n    extend(DiscussionHero.prototype, 'config', function(isInitialized, context, items) {\n        if (isInitialized || context || !app.forum.attribute('byobuTag')) {\n            return;\n        }\n\n        const { discussion } = this.props;\n\n        if (discussion.recipientUsers().length || discussion.recipientGroups().length) {\n            const items = document.getElementsByClassName('DiscussionHero-items');\n            const { children } = items[0];\n            const recipients = 'item-recipients';\n\n            const classes = [];\n            Object.keys(children).forEach(item => {\n                classes.push(children[item].className);\n            });\n\n            const privateDiscussion = classes.filter(i => i === recipients);\n\n            if (privateDiscussion.length) {\n                items[0].className = `${items[0].className} isPrivateDiscussion`;\n            }\n        }\n    });\n\n    /**\n     * Remove tag from private discussions in discussion list\n     */\n    extend(DiscussionListItem.prototype, 'config', (isInitialized, context) => {\n        if (isInitialized || context || !app.forum.attribute('byobuTag')) {\n            return;\n        }\n\n        const tagsClassName = '.item-tags';\n        const recipientsClassName = '.DiscussionListItem-info > .item-recipients';\n\n        $(recipientsClassName)\n            .prev(tagsClassName)\n            .css('display', 'none');\n    });\n}\n","import { extend } from 'flarum/extend';\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\nimport ItemList from 'flarum/utils/ItemList';\nimport User from 'flarum/models/User';\nimport Group from 'flarum/models/Group';\nimport Button from 'flarum/components/Button';\n\nimport AddRecipientModal from './components/AddRecipientModal';\n\nexport default function() {\n    // Add a control allowing the discussion to be moved to another category.\n    extend(DiscussionControls, 'moderationControls', function(items, discussion) {\n        if (discussion.canEditRecipients()) {\n            items.add(\n                'recipients',\n                Button.component({\n                    children: app.translator.trans('fof-byobu.forum.buttons.edit_recipients'),\n                    icon: 'far fa-map',\n                    onclick: () => app.modal.show(new AddRecipientModal({ discussion })),\n                })\n            );\n        }\n\n        if (discussion.recipientUsers().length > 0 && discussion.canMakePublic()) {\n            items.add(\n                'make_public',\n                Button.component({\n                    children: app.translator.trans('fof-byobu.forum.buttons.make_public'),\n                    icon: 'far fa-eye',\n                    onclick: () => {\n                        if (discussion && confirm(app.translator.trans('fof-byobu.forum.confirm.make_public'))) {\n                            let recipientGroups = [];\n                            let recipientUsers = [];\n\n                            discussion.save({ relationships: { recipientUsers, recipientGroups } }).then(() => m.redraw());\n                        }\n                    },\n                })\n            );\n        }\n\n        if (discussion.recipientUsers().length > 1) {\n            items.add(\n                'remove',\n                Button.component({\n                    children: app.translator.trans('fof-byobu.forum.buttons.remove_from_discussion'),\n                    icon: 'fas fa-user-slash',\n                    onclick: () => {\n                        if (discussion) {\n                            let recipients = new ItemList();\n                            discussion.recipientUsers().map(user => {\n                                if (app.session.user.id() !== user.id()) {\n                                    recipients.add('users:' + user.id(), user);\n                                }\n                            });\n\n                            let recipientGroups = [];\n                            let recipientUsers = [];\n\n                            recipients.toArray().forEach(recipient => {\n                                if (recipient instanceof User) {\n                                    recipientUsers.push(recipient);\n                                }\n                                if (recipient instanceof Group) {\n                                    recipientGroups.push(recipient);\n                                }\n                            });\n\n                            discussion.save({ relationships: { recipientUsers, recipientGroups } }).then(() => app.history.back());\n                        }\n                    },\n                })\n            );\n        }\n    });\n}\n","import { extend } from 'flarum/extend';\nimport Discussion from 'flarum/models/Discussion';\nimport Badge from 'flarum/components/Badge';\n\nexport default function addHasRecipientsBadge() {\n    extend(Discussion.prototype, 'badges', function(badges) {\n        if (this.recipientUsers().length || this.recipientGroups().length) {\n            badges.add(\n                'private',\n                Badge.component({\n                    type: 'private',\n                    label: app.translator.trans('fof-byobu.forum.badges.is_private.tooltip'),\n                    icon: 'fas fa-map',\n                }),\n                10\n            );\n        }\n    });\n}\n","import { extend } from 'flarum/extend';\nimport UserControls from 'flarum/utils/UserControls';\nimport PrivateDiscussionComposer from './components/PrivateDiscussionComposer';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\n\nexport default function() {\n    // Add a control allowing the discussion to be moved to another category.\n    extend(UserControls, 'userControls', function(items, user) {\n        if (\n            app.session.user &&\n            app.session.user.id() !== user.id() &&\n            app.forum.attribute('canStartPrivateDiscussion') &&\n            (user.blocksPd() === false || (app.forum.attribute('canStartPrivateDiscussionWithBlockers') && user.cannotBeDirectMessaged()))\n        ) {\n            items.add(\n                'private-discussion',\n                Button.component({\n                    children: app.translator.trans('fof-byobu.forum.buttons.send_pd', { username: user.username() }),\n                    icon: 'far fa-map',\n                    onclick: () => {\n                        const deferred = m.deferred();\n\n                        let recipients = new ItemList();\n                        recipients.add('users:' + app.session.user.id(), app.session.user);\n                        recipients.add('users:' + user.id(), user);\n\n                        PrivateDiscussionComposer.prototype.recipients = recipients;\n\n                        const component = new PrivateDiscussionComposer({\n                            user: app.session.user,\n                            recipients: recipients,\n                            recipientUsers: recipients,\n                            titlePlaceholder: app.translator.trans('fof-byobu.forum.composer_private_discussion.title_placeholder'),\n                            submitLabel: app.translator.trans('fof-byobu.forum.composer_private_discussion.submit_button'),\n                        });\n\n                        app.composer.load(component);\n                        app.composer.show();\n\n                        deferred.resolve(component);\n\n                        return deferred.promise;\n                    },\n                })\n            );\n        }\n\n        return items;\n    });\n}\n","import { extend } from 'flarum/extend';\nimport SettingsPage from 'flarum/components/SettingsPage';\nimport Switch from 'flarum/components/Switch';\n\nexport default function() {\n    extend(SettingsPage.prototype, 'privacyItems', function(items) {\n        items.add(\n            'byobu-block-dm',\n            Switch.component({\n                children: app.translator.trans('fof-byobu.forum.user.settings.block_pd'),\n                state: this.user.preferences().blocksPd,\n                onchange: (value, component) => this.preferenceSaver('blocksPd')(value, component),\n            })\n        );\n    });\n}\n","import DiscussionList from 'flarum/components/DiscussionList';\n\nexport default class PrivateDiscussionList extends DiscussionList {}\n","import UserPage from 'flarum/components/UserPage';\nimport PrivateDiscussionList from './PrivateDiscussionList';\nimport Button from 'flarum/components/Button';\nimport Dropdown from 'flarum/components/Dropdown';\nimport ItemList from 'flarum/utils/ItemList';\nimport listItems from 'flarum/helpers/listItems';\nimport PrivateDiscussionComposer from './PrivateDiscussionComposer';\nimport LogInModal from 'flarum/components/LogInModal';\n\nexport default class PrivateDiscussionsUserPage extends UserPage {\n    init() {\n        super.init();\n\n        this.changeSort('latest');\n    }\n\n    show(user) {\n        // We can not create the list in init because the user will not be available if it has to be loaded asynchronously\n        this.list = new PrivateDiscussionList({\n            params: {\n                q: `byobu:${user.username()} is:private`,\n                sort: this.sort,\n            },\n        });\n\n        this.list.refresh();\n\n        // We call the parent method after creating the list, this way the this.list property\n        // is set before content() is called for the first time\n        super.show(user);\n    }\n\n    handleChangeSort(sort, e) {\n        e.preventDefault();\n\n        this.changeSort(sort);\n    }\n\n    changeSort(sort) {\n        this.sort = sort;\n        this.loadUser(m.route.param('username'));\n    }\n\n    newDiscussionAction(e) {\n        e.preventDefault();\n\n        const deferred = m.deferred();\n\n        if (app.session.user) {\n            let recipients = new ItemList();\n            recipients.add('users:' + app.session.user.id(), app.session.user);\n\n            if (this.user !== null && app.session.user.id() !== this.user.id()) {\n                recipients.add('users:' + this.user.id(), this.user);\n            }\n\n            PrivateDiscussionComposer.prototype.recipients = recipients;\n\n            const component = new PrivateDiscussionComposer({\n                user: app.session.user,\n                recipients: recipients,\n                recipientUsers: recipients,\n                titlePlaceholder: app.translator.trans('fof-byobu.forum.composer_private_discussion.title_placeholder'),\n                submitLabel: app.translator.trans('fof-byobu.forum.composer_private_discussion.submit_button'),\n            });\n\n            app.composer.load(component);\n\n            deferred.resolve(component);\n        } else {\n            deferred.reject();\n\n            app.modal.show(new LogInModal());\n        }\n\n        return deferred.promise;\n    }\n\n    content() {\n        return (\n            <div className=\"DiscussionsUserPage\">\n                <div className=\"DiscussionsUserPage-toolbar\">\n                    <ul className=\"DiscussionsUserPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n                    <ul className=\"DiscussionsUserPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                </div>\n                {this.list.render()}\n            </div>\n        );\n    }\n\n    actionItems() {\n        const items = new ItemList();\n        const canStartDiscussion = app.forum.attribute('canStartDiscussion') || !app.session.user;\n\n        if (app.session.user && app.forum.attribute('canStartPrivateDiscussion')) {\n            items.add(\n                'start_private',\n                Button.component({\n                    children: app.translator.trans(\n                        canStartDiscussion ? 'fof-byobu.forum.nav.start_button' : 'core.forum.index.cannot_start_discussion_button'\n                    ),\n                    className: 'Button Button--primary IndexPage-newDiscussion',\n                    itemClassName: 'fof-byobu_primaryControl',\n                    onclick: this.newDiscussionAction.bind(this),\n                    disabled: !canStartDiscussion,\n                })\n            );\n        }\n\n        return items;\n    }\n\n    viewItems() {\n        const items = new ItemList();\n        const sortMap = this.list.sortMap();\n\n        const sortOptions = {};\n        for (const i in sortMap) {\n            sortOptions[i] = app.translator.trans('core.forum.index_sort.' + i + '_button');\n        }\n\n        items.add(\n            'sort',\n            Dropdown.component({\n                buttonClassName: 'Button',\n                label: sortOptions[this.sort] || Object.keys(sortMap).map(key => sortOptions[key])[0],\n                children: Object.keys(sortOptions).map(value => {\n                    const label = sortOptions[value];\n                    const active = (this.sort || Object.keys(sortMap)[0]) === value;\n\n                    return Button.component({\n                        children: label,\n                        icon: active ? 'fas fa-check' : true,\n                        onclick: this.handleChangeSort.bind(this, value),\n                        active: active,\n                    });\n                }),\n            })\n        );\n\n        return items;\n    }\n}\n","import { extend } from 'flarum/extend';\nimport UserPage from 'flarum/components/UserPage';\nimport LinkButton from 'flarum/components/LinkButton';\nimport PrivateDiscussionsUserPage from './components/PrivateDiscussionsUserPage';\n\nexport default function() {\n    app.routes['user.byobu'] = { path: '/u/:username/byobu', component: PrivateDiscussionsUserPage.component() };\n\n    extend(UserPage.prototype, 'navItems', function(items) {\n        const href = app.route('user.byobu', { username: this.user.username() });\n\n        // Hide links from guests if they are not already on the page\n        if (!app.session.user && m.route() !== href) return;\n\n        items.add(\n            'byobu',\n            LinkButton.component({\n                href,\n                children: app.translator.trans('fof-byobu.forum.user.byobu_link'),\n                icon: 'fas fa-map',\n            }),\n            85\n        );\n    });\n}\n","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionNotification extends Notification {\n    icon() {\n        return 'fas fa-map';\n    }\n\n    href() {\n        const notification = this.props.notification;\n        const discussion = notification.subject();\n\n        return app.route.discussion(discussion);\n    }\n\n    content() {\n        const user = this.props.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_text', {\n            user: user,\n        });\n    }\n}\n","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionReplyNotification extends Notification {\n    icon() {\n        return 'fas fa-reply';\n    }\n\n    href() {\n        const notification = this.props.notification;\n        const discussion = notification.subject();\n        const content = notification.content() || {};\n\n        return app.route.discussion(discussion, content.postNumber);\n    }\n\n    content() {\n        const user = this.props.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_reply_text', {\n            user: user,\n        });\n    }\n}\n","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionUserLeftNotification extends Notification {\n    icon() {\n        return 'fas fa-map';\n    }\n\n    href() {\n        const notification = this.props.notification;\n        const discussion = notification.subject();\n\n        return app.route.discussion(discussion);\n    }\n\n    content() {\n        const user = this.props.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_user_left_text', {\n            user: user,\n        });\n    }\n}\n","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionAddedNotification extends Notification {\n    icon() {\n        return 'fas fa-map';\n    }\n\n    href() {\n        const notification = this.props.notification;\n        const discussion = notification.subject();\n\n        return app.route.discussion(discussion);\n    }\n\n    content() {\n        const user = this.props.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_added_text', {\n            user: user,\n        });\n    }\n}\n","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionMadePublicNotification extends Notification {\n    icon() {\n        return 'fas fa-map';\n    }\n\n    href() {\n        const notification = this.props.notification;\n        const discussion = notification.subject();\n\n        return app.route.discussion(discussion);\n    }\n\n    content() {\n        const user = this.props.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_made_public_text', {\n            user: user,\n        });\n    }\n}\n","import { extend } from 'flarum/extend';\nimport Page from 'flarum/components/Page';\nimport ItemList from 'flarum/utils/ItemList';\nimport listItems from 'flarum/helpers/listItems';\nimport icon from 'flarum/helpers/icon';\nimport PrivateDiscussionList from './PrivateDiscussionList';\nimport WelcomeHero from 'flarum/components/WelcomeHero';\nimport PrivateDiscussionComposer from './PrivateDiscussionComposer';\nimport LogInModal from 'flarum/components/LogInModal';\nimport DiscussionPage from 'flarum/components/DiscussionPage';\nimport Select from 'flarum/components/Select';\nimport Button from 'flarum/components/Button';\nimport LinkButton from 'flarum/components/LinkButton';\nimport SelectDropdown from 'flarum/components/SelectDropdown';\n\nexport default class PrivateDiscussionIndex extends Page {\n    init() {\n        super.init();\n\n        // If the user is returning from a discussion page, then take note of which\n        // discussion they have just visited. After the view is rendered, we will\n        // scroll down so that this discussion is in view.\n        if (app.previous instanceof DiscussionPage) {\n            this.lastDiscussion = app.previous.discussion;\n        }\n\n        // If the user is coming from the discussion list, then they have either\n        // just switched one of the parameters (filter, sort, search) or they\n        // probably want to refresh the results. We will clear the discussion list\n        // cache so that results are reloaded.\n        if (app.previous instanceof PrivateDiscussionIndex) {\n            app.cache.privateDiscussionList = null;\n        }\n\n        const params = this.params();\n\n        if (app.cache.privateDiscussionList) {\n            // Compare the requested parameters (sort, search query) to the ones that\n            // are currently present in the cached discussion list. If they differ, we\n            // will clear the cache and set up a new discussion list component with\n            // the new parameters.\n            Object.keys(params).some(key => {\n                if (app.cache.privateDiscussionList.props.params[key] !== params[key]) {\n                    app.cache.privateDiscussionList = null;\n                    return true;\n                }\n            });\n        }\n\n        if (!app.cache.privateDiscussionList) {\n            app.cache.privateDiscussionList = new PrivateDiscussionList({ params });\n        }\n\n        app.history.push('private-index', icon('far fa-map'));\n\n        this.bodyClass = 'App--index';\n    }\n\n    onunload() {\n        // Save the scroll position so we can restore it when we return to the\n        // discussion list.\n        app.cache.scrollTop = $(window).scrollTop();\n    }\n\n    view() {\n        return (\n            <div className=\"IndexPage\">\n                {this.hero()}\n                <div className=\"container\">\n                    <nav className=\"IndexPage-nav sideNav\">\n                        <ul>{listItems(this.sidebarItems().toArray())}</ul>\n                    </nav>\n                    <div className=\"IndexPage-results sideNavOffset\">\n                        <div className=\"IndexPage-toolbar\">\n                            <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                            <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n                        </div>\n                        {app.cache.discussionList.render()}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    config(isInitialized, context) {\n        super.config(...arguments);\n\n        if (isInitialized) return;\n\n        extend(context, 'onunload', () => $('#app').css('min-height', ''));\n\n        app.setTitle('');\n        app.setTitleCount(0);\n\n        // Work out the difference between the height of this hero and that of the\n        // previous hero. Maintain the same scroll position relative to the bottom\n        // of the hero so that the sidebar doesn't jump around.\n        const oldHeroHeight = app.cache.heroHeight;\n        const heroHeight = (app.cache.heroHeight = this.$('.Hero').outerHeight());\n        const scrollTop = app.cache.scrollTop;\n\n        $('#app').css('min-height', $(window).height() + heroHeight);\n\n        // Scroll to the remembered position. We do this after a short delay so that\n        // it happens after the browser has done its own \"back button\" scrolling,\n        // which isn't right. https://github.com/flarum/core/issues/835\n        const scroll = () => $(window).scrollTop(scrollTop - oldHeroHeight + heroHeight);\n        scroll();\n        setTimeout(scroll, 1);\n\n        // If we've just returned from a discussion page, then the constructor will\n        // have set the `lastDiscussion` property. If this is the case, we want to\n        // scroll down to that discussion so that it's in view.\n        if (this.lastDiscussion) {\n            const $discussion = this.$(`.DiscussionListItem[data-id=\"${this.lastDiscussion.id()}\"]`);\n\n            if ($discussion.length) {\n                const indexTop = $('#header').outerHeight();\n                const indexBottom = $(window).height();\n                const discussionTop = $discussion.offset().top;\n                const discussionBottom = discussionTop + $discussion.outerHeight();\n\n                if (discussionTop < scrollTop + indexTop || discussionBottom > scrollTop + indexBottom) {\n                    $(window).scrollTop(discussionTop - indexTop);\n                }\n            }\n        }\n    }\n\n    /**\n     * Get the component to display as the hero.\n     *\n     * @return {MithrilComponent}\n     */\n    hero() {\n        return WelcomeHero.component();\n    }\n\n    /**\n     * Build an item list for the sidebar of the index page. By default this is a\n     * \"New Discussion\" button, and then a DropdownSelect component containing a\n     * list of navigation items.\n     *\n     * @return {ItemList}\n     */\n    sidebarItems() {\n        const items = new ItemList();\n        const canStartDiscussion = app.forum.attribute('canStartDiscussion') || !app.session.user;\n\n        items.add(\n            'newDiscussion',\n            Button.component({\n                children: app.translator.trans(\n                    canStartDiscussion ? 'core.forum.index.start_discussion_button' : 'core.forum.index.cannot_start_discussion_button'\n                ),\n                icon: 'fas fa-edit',\n                className: 'Button Button--primary IndexPage-newDiscussion',\n                itemClassName: 'App-primaryControl',\n                onclick: this.newDiscussion.bind(this),\n                disabled: !canStartDiscussion,\n            })\n        );\n\n        items.add(\n            'nav',\n            SelectDropdown.component({\n                children: this.navItems(this).toArray(),\n                buttonClassName: 'Button',\n                className: 'App-titleControl',\n            })\n        );\n\n        return items;\n    }\n\n    /**\n     * Build an item list for the navigation in the sidebar of the index page. By\n     * default this is just the 'All Discussions' link.\n     *\n     * @return {ItemList}\n     */\n    navItems() {\n        const items = new ItemList();\n        const params = this.stickyParams();\n\n        items.add(\n            'allDiscussions',\n            LinkButton.component({\n                href: app.route('index', params),\n                children: app.translator.trans('core.forum.index.all_discussions_link'),\n                icon: 'far fa-comments',\n            }),\n            100\n        );\n\n        return items;\n    }\n\n    /**\n     * Build an item list for the part of the toolbar which is concerned with how\n     * the results are displayed. By default this is just a select box to change\n     * the way discussions are sorted.\n     *\n     * @return {ItemList}\n     */\n    viewItems() {\n        const items = new ItemList();\n        const sortMap = app.cache.discussionList.sortMap();\n\n        const sortOptions = {};\n        for (const i in sortMap) {\n            sortOptions[i] = app.translator.trans('core.forum.index_sort.' + i + '_button');\n        }\n\n        items.add(\n            'sort',\n            Select.component({\n                options: sortOptions,\n                value: this.params().sort || Object.keys(sortMap)[0],\n                onchange: this.changeSort.bind(this),\n            })\n        );\n\n        return items;\n    }\n\n    /**\n     * Build an item list for the part of the toolbar which is about taking action\n     * on the results. By default this is just a \"mark all as read\" button.\n     *\n     * @return {ItemList}\n     */\n    actionItems() {\n        const items = new ItemList();\n\n        items.add(\n            'refresh',\n            Button.component({\n                title: app.translator.trans('core.forum.index.refresh_tooltip'),\n                icon: 'fas fa-refresh',\n                className: 'Button Button--icon',\n                onclick: () => app.cache.discussionList.refresh(),\n            })\n        );\n\n        if (app.session.user) {\n            items.add(\n                'markAllAsRead',\n                Button.component({\n                    title: app.translator.trans('core.forum.index.mark_all_as_read_tooltip'),\n                    icon: 'fas fa-check',\n                    className: 'Button Button--icon',\n                    onclick: this.markAllAsRead.bind(this),\n                })\n            );\n        }\n\n        return items;\n    }\n\n    /**\n     * Return the current search query, if any. This is implemented to activate\n     * the search box in the header.\n     *\n     * @see Search\n     * @return {String}\n     */\n    searching() {\n        return this.params().q;\n    }\n\n    /**\n     * Redirect to the index page without a search filter. This is called when the\n     * 'x' is clicked in the search box in the header.\n     *\n     * @see Search\n     */\n    clearSearch() {\n        const params = this.params();\n        delete params.q;\n\n        m.route(app.route(this.props.routeName, params));\n    }\n\n    /**\n     * Redirect to the index page using the given sort parameter.\n     *\n     * @param {String} sort\n     */\n    changeSort(sort) {\n        const params = this.params();\n\n        if (sort === Object.keys(app.cache.discussionList.sortMap())[0]) {\n            delete params.sort;\n        } else {\n            params.sort = sort;\n        }\n\n        m.route(app.route(this.props.routeName, params));\n    }\n\n    /**\n     * Get URL parameters that stick between filter changes.\n     *\n     * @return {Object}\n     */\n    stickyParams() {\n        return {\n            sort: m.route.param('sort'),\n            q: m.route.param('q'),\n        };\n    }\n\n    /**\n     * Get parameters to pass to the DiscussionList component.\n     *\n     * @return {Object}\n     */\n    params() {\n        const params = this.stickyParams();\n\n        params.filter = m.route.param('filter');\n\n        return params;\n    }\n\n    /**\n     * Log the user in and then open the composer for a new discussion.\n     *\n     * @return {Promise}\n     */\n    newDiscussion() {\n        const deferred = m.deferred();\n\n        if (app.session.user) {\n            this.composeNewDiscussion(deferred);\n        } else {\n            app.modal.show(\n                new LogInModal({\n                    onlogin: this.composeNewDiscussion.bind(this, deferred),\n                })\n            );\n        }\n\n        return deferred.promise;\n    }\n\n    /**\n     * Initialize the composer for a new discussion.\n     *\n     * @param {Deferred} deferred\n     * @return {Promise}\n     */\n    composeNewDiscussion(deferred) {\n        const component = new PrivateDiscussionComposer({ user: app.session.user });\n\n        app.composer.load(component);\n        app.composer.show();\n\n        deferred.resolve(component);\n\n        return deferred.promise;\n    }\n\n    /**\n     * Mark all discussions as read.\n     *\n     * @return void\n     */\n    markAllAsRead() {\n        const confirmation = confirm(app.translator.trans('core.forum.index.mark_all_as_read_confirmation'));\n\n        if (confirmation) {\n            app.session.user.save({ readTime: new Date() });\n        }\n    }\n}\n","import EventPost from 'flarum/components/EventPost';\nimport recipientsLabel from '../../common/helpers/recipientsLabel';\n\nexport default class RecipientsModified extends EventPost {\n    static initProps(props) {\n        super.initProps(props);\n\n        function diff(diff1, diff2, store) {\n            return diff1.filter(item => diff2.indexOf(item) === -1).map(id => app.store.getById(store, id));\n        }\n\n        const content = props.post.content();\n\n        // For event posts existing before groups functionality.\n        if (!content['new'] && content.length == 2) {\n            const oldRecipients = props.post.content()[0];\n            const newRecipients = props.post.content()[1];\n            props.added = diff(newRecipients, oldRecipients, 'users');\n            props.removed = diff(oldRecipients, newRecipients, 'users');\n        } else {\n            var usersAdded = diff(content['new']['users'], content['old']['users'], 'users');\n            var usersRemoved = diff(content['old']['users'], content['new']['users'], 'users');\n            var groupsAdded = diff(content['new']['groups'], content['old']['groups'], 'groups');\n            var groupsRemoved = diff(content['old']['groups'], content['new']['groups'], 'groups');\n\n            props.added = usersAdded.concat(groupsAdded);\n            props.removed = usersRemoved.concat(groupsRemoved);\n        }\n    }\n\n    icon() {\n        return 'far fa-map';\n    }\n\n    descriptionKey() {\n        var localeBase = 'fof-byobu.forum.post.recipients_modified.';\n\n        if (this.props.added.length) {\n            if (this.props.removed.length) {\n                return localeBase + 'added_and_removed';\n            }\n\n            return localeBase + 'added';\n        }\n\n        return localeBase + 'removed';\n    }\n\n    descriptionData() {\n        const data = {};\n\n        if (this.props.added.length) {\n            data.added = recipientsLabel(this.props.added, { link: true });\n        }\n\n        if (this.props.removed.length) {\n            data.removed = recipientsLabel(this.props.removed, { link: true });\n        }\n\n        return data;\n    }\n}\n","import EventPost from 'flarum/components/EventPost';\n\nexport default class RecipientLeft extends EventPost {\n    static initProps(props) {\n        super.initProps(props);\n    }\n\n    icon() {\n        return 'far fa-map';\n    }\n\n    descriptionKey() {\n        return 'fof-byobu.forum.post.recipients_modified.removed_self';\n    }\n}\n","import { extend } from 'flarum/extend';\nimport LinkButton from 'flarum/components/LinkButton';\nimport SessionDropdown from 'flarum/components/SessionDropdown';\nimport IndexPage from 'flarum/components/IndexPage';\n\nexport default () => {\n    extend(SessionDropdown.prototype, 'items', items => {\n        if (!app.forum.attribute('byobuOnIndex')) {\n            const user = app.session.user;\n\n            items.add(\n                'privateDiscussions',\n                LinkButton.component({\n                    icon: 'fas fa-map',\n                    children: app.translator.trans('fof-byobu.forum.user.dropdown_label'),\n                    href: app.route('user.byobu', { username: user.username() }),\n                }),\n                99\n            );\n        }\n\n\n    });\n\n    extend(IndexPage.prototype, 'navItems', items => {\n        const user = app.session.user;\n\n        if (app.forum.attribute('byobuOnIndex') && user) {\n            items.add(\n                'privateDiscussions',\n                LinkButton.component({\n                    icon: 'fas fa-map',\n                    children: app.translator.trans('fof-byobu.forum.user.dropdown_label'),\n                    href: app.route('user.byobu', { username: user.username() }),\n                }),\n                75\n            );\n        }\n    });\n\n};\n","import recipientCountLabel from './recipientCountLabel';\nimport recipientLabel from './recipientLabel';\nimport recipientsLabel from './recipientsLabel';\n\nexport const helpers = {\n    recipientCountLabel: recipientCountLabel,\n    recipientLabel: recipientLabel,\n    recipientsLabel: recipientsLabel,\n};\n","import PrivateDiscussionComposer from './PrivateDiscussionComposer';\nimport AddRecipientModal from './AddRecipientModal';\nimport PrivateDiscussionAddedNotification from './notifications/PrivateDiscussionAddedNotification';\nimport PrivateDiscussionIndex from './PrivateDiscussionIndex';\nimport PrivateDiscussionList from './PrivateDiscussionList';\nimport PrivateDiscussionNotification from './notifications/PrivateDiscussionNotification';\nimport PrivateDiscussionReplyNotification from './notifications/PrivateDiscussionReplyNotification';\nimport PrivateDiscussionsUserPage from './PrivateDiscussionsUserPage';\nimport PrivateDiscussionUserLeftNotification from './notifications/PrivateDiscussionUserLeftNotification';\nimport RecipientLeft from './RecipientLeft';\nimport RecipientSearch from './RecipientSearch';\nimport RecipientsModified from './RecipientsModified';\nimport GroupSearchSource from './sources/GroupSearchSource';\nimport UserSearchSource from './sources/GroupSearchSource';\n\nexport const components = {\n    AddRecipientModal: AddRecipientModal,\n    PrivateDiscussionAddedNotification: PrivateDiscussionAddedNotification,\n    PrivateDiscussionComposer: PrivateDiscussionComposer,\n    PrivateDiscussionIndex: PrivateDiscussionIndex,\n    PrivateDiscussionList: PrivateDiscussionList,\n    PrivateDiscussionNotification: PrivateDiscussionNotification,\n    PrivateDiscussionReplyNotification: PrivateDiscussionReplyNotification,\n    PrivateDiscussionUserPage: PrivateDiscussionsUserPage,\n    PrivateDiscussionUserLeftNotification: PrivateDiscussionUserLeftNotification,\n    RecipientLeft: RecipientLeft,\n    RecipientSearch: RecipientSearch,\n    RecipientsModified: RecipientsModified,\n    sources: {\n        GroupSearchSource: GroupSearchSource,\n        UserSearchSource: UserSearchSource,\n    },\n};\n","import { extend } from 'flarum/extend';\nimport Model from 'flarum/Model';\nimport Discussion from 'flarum/models/Discussion';\nimport User from 'flarum/models/User';\nimport addRecipientComposer from './addRecipientComposer';\nimport addRecipientLabels from './addRecipientLabels';\nimport addRecipientsControl from './addRecipientsControl';\nimport addHasRecipientsBadge from './addHasRecipientsBadge';\nimport addDiscussPrivatelyControl from './addDiscussPrivatelyControl';\nimport addPrivacySetting from './addPrivacySetting';\nimport addPrivateDiscussionsPage from './addPrivateDiscussionsPage';\nimport NotificationGrid from 'flarum/components/NotificationGrid';\nimport PrivateDiscussionNotification from './components/notifications/PrivateDiscussionNotification';\nimport PrivateDiscussionRepliedNotification from './components/notifications/PrivateDiscussionReplyNotification';\nimport PrivateDiscussionUserLeftNotification from './components/notifications/PrivateDiscussionUserLeftNotification';\nimport PrivateDiscussionAddedNotification from './components/notifications/PrivateDiscussionAddedNotification';\nimport PrivateDiscussionMadePublicNotification from './components/notifications/PrivateDiscussionMadePublicNotification';\nimport PrivateDiscussionIndex from './components/PrivateDiscussionIndex';\nimport RecipientsModified from './components/RecipientsModified';\nimport RecipientLeft from './components/RecipientLeft';\nimport addPrivateDiscussionSessionDropdown from './addPrivateDiscussionsToSessionDropdown';\n\nexport * from '../common/helpers';\nexport * from './components';\n\napp.initializers.add('fof-byobu', function(app) {\n    app.routes.private_discussions = { path: '/private-discussions', component: PrivateDiscussionIndex.component() };\n\n    Discussion.prototype.recipientUsers = Model.hasMany('recipientUsers');\n    Discussion.prototype.oldRecipientUsers = Model.hasMany('oldRecipientUsers');\n    Discussion.prototype.recipientGroups = Model.hasMany('recipientGroups');\n    Discussion.prototype.oldRecipientGroups = Model.hasMany('oldRecipientGroups');\n\n    Discussion.prototype.canEditRecipients = Model.attribute('canEditRecipients');\n    Discussion.prototype.canEditUserRecipients = Model.attribute('canEditUserRecipients');\n    Discussion.prototype.canEditGroupRecipients = Model.attribute('canEditGroupRecipients');\n    Discussion.prototype.canEditGroupRecipients = Model.attribute('canEditGroupRecipients');\n    Discussion.prototype.canMakePublic = Model.attribute('canMakePublic');\n\n    User.prototype.blocksPd = Model.attribute('blocksPd');\n    User.prototype.cannotBeDirectMessaged = Model.attribute('cannotBeDirectMessaged');\n\n    app.postComponents.recipientsModified = RecipientsModified;\n    app.postComponents.recipientLeft = RecipientLeft;\n\n    addRecipientComposer(app);\n    addRecipientLabels();\n    addRecipientsControl();\n    addHasRecipientsBadge();\n    addPrivacySetting();\n\n    addDiscussPrivatelyControl();\n\n    addPrivateDiscussionsPage();\n    addPrivateDiscussionSessionDropdown();\n\n    app.notificationComponents.byobuPrivateDiscussionCreated = PrivateDiscussionNotification;\n    app.notificationComponents.byobuPrivateDiscussionReplied = PrivateDiscussionRepliedNotification;\n    app.notificationComponents.byobuRecipientRemoved = PrivateDiscussionUserLeftNotification;\n    app.notificationComponents.byobuPrivateDiscussionAdded = PrivateDiscussionAddedNotification;\n    app.notificationComponents.byobuMadePublic = PrivateDiscussionMadePublicNotification;\n\n    // Add notification preferences.\n    extend(NotificationGrid.prototype, 'notificationTypes', function(items) {\n        items.add('byobuPrivateDiscussionCreated', {\n            name: 'byobuPrivateDiscussionCreated',\n            icon: 'fas fa-map',\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_label'),\n        });\n        items.add('byobuPrivateDiscussionReplied', {\n            name: 'byobuPrivateDiscussionReplied',\n            icon: 'fas fa-map',\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_reply_label'),\n        });\n        items.add('byobuPrivateDiscussionAdded', {\n            name: 'byobuPrivateDiscussionAdded',\n            icon: 'fas fa-map',\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_added_label'),\n        });\n        items.add('byobuRecipientRemoved', {\n            name: 'byobuRecipientRemoved',\n            icon: 'fas fa-map',\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_user_left_label'),\n        });\n        items.add('byobuMadePublic', {\n            name: 'byobuMadePublic',\n            icon: 'fas fa-map',\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_made_public_label'),\n        });\n    });\n});\n","module.exports = flarum.core.compat['components/DiscussionComposer'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Search'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['components/SettingsPage'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/NotificationGrid'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['components/WelcomeHero'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/SelectDropdown'];","module.exports = flarum.core.compat['components/SessionDropdown'];","module.exports = flarum.core.compat['components/IndexPage'];","export * from './src/common';\r\nexport * from './src/forum';"],"sourceRoot":""}